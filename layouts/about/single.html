{{ define "title" }}{{ .Title }}{{ end }}
{{ define "main" }}
<div class="container mb-8 mb-md-9 pt-6">
  <div class="o-inner-container o-inner-container--large mx-auto">
    <div class="o-inner-container o-inner-container--medium-large">
      <span class="u-fs-small text-primary mb-3 d-inline-block">{{ .Title }}</span>
      <h1 class="u-fs-large text-white mb-6">{{ .Params.subtitle }}</h1>
      
      <div class="row">
        <div class="col-md-12">
          <div class="c-wp u-fs-small u-ft-regular">
            {{ $content := .Content }}
            {{ $content = $content | replaceRE `\{\{< image-grid[^>]*>\}\}[\s\S]*?\{\{< /image-grid >\}\}` "" }}
            {{ $content = $content | replaceRE `\{\{< image[^>]*>\}\}` "" }}
            {{ $content | safeHTML }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{{/* Stats images in original order */}}
{{ $page := . }}
{{ $orderedNames := slice "40-people" "3-offices" "founded-2013" "clients-15-countries" "shipped-100s" }}
{{ $orderedImages := slice }}
{{ range $orderedNames }}
  {{ with $page.Resources.GetMatch (printf "%s.*" .) }}
    {{ $orderedImages = $orderedImages | append . }}
  {{ end }}
{{ end }}

{{ if gt (len $orderedImages) 0 }}
<div class="container mb-4">
  <div class="about-stats">
    <div class="stats-grid">
      {{ range $orderedImages }}
      <div class="stat-item">
        <img src="{{ .RelPermalink }}" alt="">
      </div>
      {{ end }}
    </div>
  </div>
</div>
{{ end }}

{{/* Team photo */}}
{{ $teamPhoto := .Resources.GetMatch "team-photo.*" }}
{{ if $teamPhoto }}
<div class="block1">
  <img src="{{ $teamPhoto.RelPermalink }}" alt="{{ .Site.Title }}">
</div>
{{ end }}
{{ end }}

