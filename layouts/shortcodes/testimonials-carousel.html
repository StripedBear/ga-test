<!-- DESKTOP VERSION -->
<div class="container mb-8 mb-lg-9 pt-lg-6 d-none d-md-block">
  <h2 class="u-fs-huge text-center mb-6 mb-lg-8">What our clients say</h2>
  <div class="c-testimonials-wrapper">
    <div class="c-testimonials-controls__button c-testimonials-controls__button--prev js-testimonials-carousel-prev-slide"></div>
    <div class="c-testimonials-controls__button c-testimonials-controls__button--next js-testimonials-carousel-next-slide"></div>
    <div class="c-testimonials-controls">
    </div>
    <div class="c-testimonials-container">
      <div class="c-testimonials-track js-testimonials-track">
        {{ $testimonials := split .Inner "\n" }}
        {{ range $testimonials }}
          {{ $line := trim . " \t\r" }}
          {{ if and $line (ne $line "") }}
            {{ $parts := split $line "|" }}
            {{ if ge (len $parts) 1 }}
              {{ $testimonial := trim (index $parts 0) " " }}
              {{ if $testimonial }}
                <div class="c-testimonial">
                  <div class="c-wp2 text-primary c-testimonial__content">
                    <span class="text-white d-inline">"</span>{{ $testimonial }}<span class="text-white d-inline">"</span>
                  </div>
                </div>
              {{ end }}
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>

    <div class="c-navigation-carousel-container">
      <div class="c-navigation-carousel-track js-navigation-carousel-track">
        {{ $testimonials := split .Inner "\n" }}
        {{ range $testimonials }}
          {{ $line := trim . " \t\r" }}
          {{ if and $line (ne $line "") }}
            {{ $parts := split $line "|" }}
            {{ if ge (len $parts) 4 }}
              {{ $testimonial := trim (index $parts 0) " " }}
              {{ $logo := trim (index $parts 1) " " }}
              {{ $company := trim (index $parts 2) " " }}
              {{ $author := trim (index $parts 3) " " }}
              {{ if and $logo $company $author }}
                {{ $imgResource := false }}
                {{ if $.Page.Resources }}
                  {{ $imgResource = $.Page.Resources.Get $logo }}
                  {{ if not $imgResource }}
                    {{ $imgResource = $.Page.Resources.GetMatch (printf "*%s*" $logo) }}
                  {{ end }}
                {{ end }}
                <div class="c-navigation-carousel__slide">
                  <div class="c-navigation-carousel__icon">
                    {{ if $imgResource }}
                      <img src="{{ $imgResource.RelPermalink }}" alt="{{ $company }}" />
                    {{ else }}
                      <img src="{{ (printf "/img/%s" $logo) | relURL }}" alt="{{ $company }}" />
                    {{ end }}
                  </div>
                  <div class="c-navigation-carousel__details">
                    <span>{{ $company }}</span>
                    <span>{{ $author }}</span>
                  </div>
                </div>
              {{ end }}
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</div>

<!-- MOBILE VERSION -->
<div class="container mb-8 pt-4 d-block d-md-none">
  <h2 class="u-fs-huge text-center mb-5">What our clients say</h2>
  <div class="c-testimonials-mobile js-testimonials-mobile">
    <div class="c-testimonials-mobile__container">
      <div class="c-testimonials-mobile__track js-testimonials-mobile-track">
        {{ $testimonials := split .Inner "\n" }}
        {{ range $testimonials }}
          {{ $line := trim . " \t\r" }}
          {{ if and $line (ne $line "") }}
            {{ $parts := split $line "|" }}
            {{ if ge (len $parts) 4 }}
              {{ $testimonial := trim (index $parts 0) " " }}
              {{ $logo := trim (index $parts 1) " " }}
              {{ $company := trim (index $parts 2) " " }}
              {{ $author := trim (index $parts 3) " " }}
              {{ if $testimonial }}
                {{ $imgResource := false }}
                {{ if $.Page.Resources }}
                  {{ $imgResource = $.Page.Resources.Get $logo }}
                  {{ if not $imgResource }}
                    {{ $imgResource = $.Page.Resources.GetMatch (printf "*%s*" $logo) }}
                  {{ end }}
                {{ end }}
                <div class="c-testimonials-mobile__slide js-testimonials-mobile-slide"
                     data-logo="{{ if $imgResource }}{{ $imgResource.RelPermalink }}{{ else }}{{ (printf "/img/%s" $logo) | relURL }}{{ end }}"
                     data-company="{{ $company }}"
                     data-author="{{ $author }}">
                  <div class="c-testimonials-mobile__content">
                    <span class="text-white">"</span>{{ $testimonial }}<span class="text-white">"</span>
                  </div>
                </div>
              {{ end }}
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>

    <div class="c-testimonials-mobile__nav">
      <button class="c-testimonials-mobile__btn c-testimonials-mobile__btn--prev js-testimonials-mobile-prev" aria-label="Previous"></button>
      <div class="c-testimonials-mobile__company">
        <img class="c-testimonials-mobile__logo js-testimonials-mobile-logo" src="" alt="">
        <div class="c-testimonials-mobile__company-info">
          <div class="c-testimonials-mobile__company-name js-testimonials-mobile-company"></div>
          <div class="c-testimonials-mobile__company-author js-testimonials-mobile-author"></div>
        </div>
      </div>
      <button class="c-testimonials-mobile__btn c-testimonials-mobile__btn--next js-testimonials-mobile-next" aria-label="Next"></button>
    </div>
  </div>
</div>
